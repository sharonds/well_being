# ðŸ¤– Automation Framework Setup Plan

## Executive Summary
This plan enables ANY new project to have GitHub Actions automation that can:
- Auto-implement simple tasks from issues
- Create PRs automatically
- Run tests and validations
- Manage releases and documentation
- Work seamlessly with Claude CLI

## Prerequisites Check
```bash
# Verify these are installed:
gh --version  # GitHub CLI
git --version # Git
```

## Step 1: Copy Core Automation Files

### 1.1 Create Automation Workflow
Create `.github/workflows/simple-automation.yml`:

```yaml
name: Simple Task Automation

on:
  workflow_dispatch:
    inputs:
      task_name:
        description: 'Task identifier'
        required: true
        type: string
      issue_number:
        description: 'Issue number to work on'
        required: true
        type: string

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  automate-task:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Set up Git
        run: |
          git config --global user.email "automation@github.com"
          git config --global user.name "GitHub Automation"

      - name: Create feature branch
        run: |
          BRANCH_NAME="auto/${{ inputs.task_name }}-${{ inputs.issue_number }}"
          git checkout -b $BRANCH_NAME
          echo "BRANCH_NAME=$BRANCH_NAME" >> $GITHUB_ENV

      - name: Parse issue tasks
        id: parse
        run: |
          gh issue view ${{ inputs.issue_number }} --json body -q .body > issue_body.md
          echo "## Tasks found in issue #${{ inputs.issue_number }}:" 
          cat issue_body.md
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Implement simple tasks
        run: |
          # This script will be customized per project
          # For now, it creates a marker file
          mkdir -p .automation
          echo "Task: ${{ inputs.task_name }}" > .automation/task.md
          echo "Issue: #${{ inputs.issue_number }}" >> .automation/task.md
          echo "Date: $(date)" >> .automation/task.md
          
          # Project-specific automation goes here
          # Examples:
          # - npm init -y (for Node projects)
          # - cargo init (for Rust projects)
          # - python -m venv venv (for Python projects)

      - name: Commit changes
        run: |
          git add -A
          git commit -m "feat: Automated implementation for ${{ inputs.task_name }}

          Related to #${{ inputs.issue_number }}
          
          Automated by GitHub Actions"

      - name: Push branch
        run: |
          git push origin ${{ env.BRANCH_NAME }}

      - name: Create Pull Request
        run: |
          gh pr create \
            --title "Auto: ${{ inputs.task_name }} (#${{ inputs.issue_number }})" \
            --body "## Automated Implementation

          This PR was created automatically for issue #${{ inputs.issue_number }}

          ### Tasks Completed:
          - [ ] Review automated changes
          - [ ] Run tests locally
          - [ ] Approve and merge

          ### Related Issue:
          Closes #${{ inputs.issue_number }}

          ---
          *ðŸ¤– Generated by GitHub Actions Automation*" \
            --base main \
            --head ${{ env.BRANCH_NAME }}
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Update issue
        run: |
          gh issue comment ${{ inputs.issue_number }} \
            --body "ðŸ¤– Automation has created PR for this issue. Please review the changes."
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

### 1.2 Create CI Workflow
Create `.github/workflows/ci.yml`:

```yaml
name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Run Tests
        run: |
          # Add project-specific test commands here
          echo "Tests would run here"
          # Examples:
          # npm test
          # cargo test
          # python -m pytest
          
      - name: Lint
        run: |
          # Add project-specific lint commands here
          echo "Linting would run here"
          # Examples:
          # npm run lint
          # cargo clippy
          # python -m flake8
```

### 1.3 Create Release Workflow
Create `.github/workflows/release.yml`:

```yaml
name: Release

on:
  push:
    tags:
      - 'v*'

permissions:
  contents: write

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: Generate Changelog
        id: changelog
        run: |
          echo "# Release Notes" > RELEASE_NOTES.md
          echo "" >> RELEASE_NOTES.md
          git log --pretty=format:"- %s" $(git describe --tags --abbrev=0 HEAD^)..HEAD >> RELEASE_NOTES.md
          
      - name: Create Release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tag_name: ${{ github.ref }}
          release_name: Release ${{ github.ref }}
          body_path: RELEASE_NOTES.md
          draft: false
          prerelease: false
```

## Step 2: Create Helper Scripts

### 2.1 Create Automation Setup Script
Create `scripts/setup-automation.sh`:

```bash
#!/bin/bash

echo "ðŸ¤– Setting up GitHub Automation Framework"

# Check prerequisites
command -v gh >/dev/null 2>&1 || { echo "âŒ GitHub CLI (gh) is required. Install from: https://cli.github.com"; exit 1; }
command -v git >/dev/null 2>&1 || { echo "âŒ Git is required."; exit 1; }

# Initialize git if needed
if [ ! -d .git ]; then
    echo "ðŸ“¦ Initializing git repository..."
    git init
fi

# Create directory structure
echo "ðŸ“ Creating directory structure..."
mkdir -p .github/workflows
mkdir -p scripts
mkdir -p .automation

# Ensure GitHub repo exists
echo "ðŸ”— Checking GitHub repository..."
if ! gh repo view >/dev/null 2>&1; then
    echo "Creating GitHub repository..."
    REPO_NAME=$(basename "$PWD")
    gh repo create "$REPO_NAME" --public --source=. --remote=origin --push
fi

# Create initial issue for testing
echo "ðŸ“ Creating test issue..."
gh issue create --title "Setup Project Structure" --body "
Automated setup tasks:
- [ ] Initialize project structure
- [ ] Add README.md
- [ ] Configure automation
- [ ] Add .gitignore
- [ ] Create initial tests
" || echo "Issue might already exist"

echo "âœ… Automation framework setup complete!"
echo ""
echo "To test the automation:"
echo "  gh workflow run simple-automation.yml --field task_name=setup --field issue_number=1"
```

### 2.2 Create Project Customization Script
Create `scripts/customize-automation.sh`:

```bash
#!/bin/bash

echo "ðŸŽ¨ Customizing automation for your project"

# Detect project type
if [ -f "package.json" ]; then
    PROJECT_TYPE="node"
    echo "ðŸ“¦ Detected: Node.js project"
elif [ -f "Cargo.toml" ]; then
    PROJECT_TYPE="rust"
    echo "ðŸ¦€ Detected: Rust project"
elif [ -f "requirements.txt" ] || [ -f "pyproject.toml" ]; then
    PROJECT_TYPE="python"
    echo "ðŸ Detected: Python project"
elif [ -f "go.mod" ]; then
    PROJECT_TYPE="go"
    echo "ðŸ¹ Detected: Go project"
else
    PROJECT_TYPE="generic"
    echo "ðŸ“„ Detected: Generic project"
fi

# Update automation workflow based on project type
case $PROJECT_TYPE in
    node)
        TEST_CMD="npm test"
        LINT_CMD="npm run lint"
        BUILD_CMD="npm run build"
        ;;
    rust)
        TEST_CMD="cargo test"
        LINT_CMD="cargo clippy"
        BUILD_CMD="cargo build --release"
        ;;
    python)
        TEST_CMD="python -m pytest"
        LINT_CMD="python -m flake8"
        BUILD_CMD="python setup.py build"
        ;;
    go)
        TEST_CMD="go test ./..."
        LINT_CMD="go vet ./..."
        BUILD_CMD="go build"
        ;;
    *)
        TEST_CMD="echo 'No tests configured'"
        LINT_CMD="echo 'No linting configured'"
        BUILD_CMD="echo 'No build configured'"
        ;;
esac

# Update CI workflow with detected commands
echo "ðŸ“ Updating CI workflow for $PROJECT_TYPE..."
sed -i.bak "s|echo \"Tests would run here\"|$TEST_CMD|g" .github/workflows/ci.yml
sed -i.bak "s|echo \"Linting would run here\"|$LINT_CMD|g" .github/workflows/ci.yml

echo "âœ… Customization complete!"
```

## Step 3: Create Claude Integration Guide

### 3.1 Create CLAUDE_AUTOMATION_GUIDE.md
Create `CLAUDE_AUTOMATION_GUIDE.md`:

```markdown
# Claude CLI Automation Guide

## Quick Commands for Claude

When working with Claude CLI in this project, use these commands:

### Start a new feature:
```
"Let's create a new feature: [description]"
```
Claude will:
1. Create a GitHub issue
2. Set up automation
3. Create feature branch
4. Implement the feature

### Run automation:
```
"Run automation for issue #[number]"
```

### Check status:
```
"Show me the current automation status"
```

### Create PR:
```
"Create a PR for the current changes"
```

## Automation Triggers

The project has these automation workflows:

1. **simple-automation.yml**: Implements simple tasks from issues
2. **ci.yml**: Runs on every push/PR
3. **release.yml**: Creates releases from tags

## Working with Issues

Create issues with checkbox tasks:
```markdown
- [ ] Task 1
- [ ] Task 2
- [ ] Task 3
```

The automation can handle simple tasks automatically.

## Best Practices

1. Keep issues small (5-10 tasks)
2. Use descriptive task names
3. Review PRs before merging
4. Tag releases regularly
```

## Step 4: One-Command Setup

### 4.1 Create Master Setup Script
Create `setup-github-automation.sh`:

```bash
#!/bin/bash

# MASTER SETUP SCRIPT FOR GITHUB AUTOMATION
# This script sets up the complete automation framework

set -e

echo "ðŸš€ GitHub Automation Framework Setup"
echo "===================================="

# Create all necessary directories
mkdir -p .github/workflows
mkdir -p scripts
mkdir -p .automation

# Download automation files from template (or create them)
cat > .github/workflows/simple-automation.yml << 'EOF'
[INSERT SIMPLE-AUTOMATION.YML CONTENT HERE]
EOF

cat > .github/workflows/ci.yml << 'EOF'
[INSERT CI.YML CONTENT HERE]
EOF

cat > .github/workflows/release.yml << 'EOF'
[INSERT RELEASE.YML CONTENT HERE]
EOF

# Create helper scripts
cat > scripts/setup-automation.sh << 'EOF'
[INSERT SETUP-AUTOMATION.SH CONTENT HERE]
EOF

cat > scripts/customize-automation.sh << 'EOF'
[INSERT CUSTOMIZE-AUTOMATION.SH CONTENT HERE]
EOF

# Create Claude guide
cat > CLAUDE_AUTOMATION_GUIDE.md << 'EOF'
[INSERT CLAUDE_AUTOMATION_GUIDE.MD CONTENT HERE]
EOF

# Make scripts executable
chmod +x scripts/*.sh

# Run setup
./scripts/setup-automation.sh
./scripts/customize-automation.sh

echo ""
echo "âœ… Setup Complete!"
echo ""
echo "Next steps:"
echo "1. Review .github/workflows/ files"
echo "2. Customize for your project needs"
echo "3. Create an issue: gh issue create --title 'Your Task'"
echo "4. Run automation: gh workflow run simple-automation.yml"
echo ""
echo "For Claude CLI: Open CLAUDE_AUTOMATION_GUIDE.md"
```

## Step 5: Usage Instructions

### For New Project Setup:

1. **In new VS Code window with Claude CLI:**
```bash
# Navigate to your new project
cd /path/to/new-project

# Copy this setup script from well_being project
cp ~/well_being/setup-github-automation.sh .

# Run the setup
chmod +x setup-github-automation.sh
./setup-github-automation.sh
```

2. **Tell Claude:**
```
"We have GitHub automation set up. Please read CLAUDE_AUTOMATION_GUIDE.md and help me create my first automated feature."
```

3. **Claude will then be able to:**
- Create issues with proper structure
- Trigger automation workflows
- Create PRs automatically
- Manage the development process

### For Existing Project:

1. Copy the automation framework:
```bash
cp -r ~/well_being/.github/workflows .github/
cp -r ~/well_being/scripts .
cp ~/well_being/CLAUDE_AUTOMATION_GUIDE.md .
```

2. Customize for your project:
```bash
./scripts/customize-automation.sh
```

## Key Features This Enables

1. **Issue-Driven Development**: Every feature starts with an issue
2. **Automated Implementation**: Simple tasks are automated
3. **PR Workflow**: Every change goes through PR review
4. **CI/CD**: Tests run automatically
5. **Release Management**: Semantic versioning with changelogs
6. **Claude Integration**: Claude can trigger and manage automation

## Success Criteria

The automation is working when:
- âœ… Creating an issue triggers available automation
- âœ… Running `gh workflow run` creates PRs
- âœ… Tests run on every push
- âœ… Releases are created from tags
- âœ… Claude can manage the workflow

## Troubleshooting

If automation fails:
1. Check GitHub Actions tab for logs
2. Ensure `gh` CLI is authenticated: `gh auth status`
3. Verify repository permissions
4. Check workflow file syntax

## This Plan is Self-Contained

Any Claude instance can execute this plan by:
1. Creating the files as specified
2. Running the setup scripts
3. Following the usage instructions

The automation will then work for ANY project type!